# 課題1（質問）

## キャッシュの必要性

キャッシュは英語で「cache」と表記し、「貯蔵所」「隠し場所」という意味を

もち、一度読み込んだ内容・情報を一時的に保存することで次回、閲覧する際に素早く

読み込めるようになる。

## キャッシュの種類

### ブラウザキャッシュ

初回Webページを表示する際に、必要なファイルデータを全てダウンロードしてページの

表示をする。

その際にダウンロードしたデータ(画像、HTML,CSS,Javascriptなど)はキャッシュとして

ブラウザに保存される。

ブラウザに保存されているデータを同じものが必要になった場合は、サーバーにリクエストを送らずに

キャッシュデータを参照する。

メリットとしては、再度同じページを表示する際に、以前表示した時より速くページを表示できる。

デメリットは場合によって、更新したコンテンツが即時に反映されないのとキャッシュを溜めすぎると

ブラウザの動作が遅くなる。

### プロキシキャッシュ

社内LANなどローカルネットワークとインターネットの間に設置してあるプロキシサーバーにデータが保存されたものを指す。

キャッシュの情報はデバイスごとではなく、プロキシサーバーに接続している全てのデバイス分が

保存される。

### CDNキャッシュ

ブラウザが取得するデータはオリジンサーバーから送られてくるが、大量のデータ送受信によるオリジン

サーバーの負荷を減らすため、キャッシュサーバーを通してデータを送信することがある。

この場合はオリジンサーバーからキャッシュサーバーへデータを送信し、キャッシュサーバーに

データが保存される。

### キャッシュを制御するヘッダー3つ

### Cache-Control: no-store

Webサーバーから返されるコンテンツをキャッシュに記録するなという指示。

### Cache-Control:no-cache

「キャッシュを使うな」に見えるが、一度キャッシュに記録されたコンテンツが現在でも

有効か否かをオリジンサーバーに問い合わせて確認が取れない限り再利用してはいけないという意味。

### Cache-Control:must-revalidate

キャッシュに記録されているコンテンツが現在も有効であるか否かをWebサーバーに必ず問い合わせよ

の指示。

出典:[https://www.ipa.go.jp/security/awareness/vendor/programmingv2/contents/405.html](https://www.ipa.go.jp/security/awareness/vendor/programmingv2/contents/405.html)

### ブラウザのキャッシュサイズ

### Chrome

キャッシュの最大サイズを利用可能なディスク容量の割合として計算し設定する。

例えば、ディスク容量が10GBならキャッシュの上限は1GB。

キャッシュがたまるとブラウザの処理が遅くなる。

### Firefox

キャッシュの最大サイズは1024MB。

キャッシュがたまるとブラウザの処理が遅くなる。

## expiresヘッダをレスポンス設定

### 動的なサイトで含めない方が良い理由

**Expires**

```
Expires: Mon, 29 Jan 2018 12:00:00 GMT
```

上記のように指定する。

基本的に過去のデータを参照するためユーザーに対しては古い情報を与えてしまう可能性があるため

特定商取引法のページや会社概要などの更新頻度が高くないページに設定する方が良い。

**Cache-Control max-age**

```
Cache-Control: max-age=60
```

上記のようにすると、キャッシュの有効期限は60秒という設定になる。つまり、60秒間コンテンツがキャッシュされたあとは強制的にオリジンサーバーを参照しにいく。

## キャッシュのWEBサービス3つ

compassのページ

CSSファイルがmax-age=31536000となっている。

31536000秒は8760時間のため365日。1年間の有効期限を設定している。

![スクリーンショット 2021-09-20 0.16.36.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/92a061b7-8e3a-4d22-8335-3c5abe36a646/スクリーンショット_2021-09-20_0.16.36.png)

youtubeのページ

cache-control:private, max-age=21284

自分のビデオのキャッシュを約6時間(21284/3600)持つ

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f656d735-bbf4-48be-b520-ba2a33c3bc41/Untitled.png)

udemyのログインページ

cache-control: public, max-age=7200

google-analysticsの有効キャッシュが2時間(7200/3600)

![スクリーンショット 2021-09-20 22.02.08.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5102479a-1439-400c-8e54-f38a8049bdda/スクリーンショット_2021-09-20_22.02.08.png)

## 課題２（実装）

### Githubを参照ください

## 課題3 (成果物に関する質問)

### サービス

金融系のサイト（SBI、UFJなど）

### ページ

ログインページ

### ファイル

コンテンツファイル

### キャッシュ

ユーザー情報、パスワード等

## 課題４（クイズ）

1.初心者エンジニアhoge君が入社してきました。「先輩、クッキーとキャッシュの違いがわかりません。どっちを使うのが良いのか教えてください！」初心者でもわかりやすいように、それぞれの説明とメリット、デメリットを説明してください

2.HTTPレスポンスによるキャッシュ偽造攻撃対策はどのようなことをすれば良いか

3.max-age=3600の保存期間はどれくらいでしょうか。次の三つの中から選んでください。どのような方程式で算出したのか示してください。

- 1時間
- 1日
- 半日